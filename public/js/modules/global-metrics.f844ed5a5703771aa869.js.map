{"version":3,"sources":["webpack:///./resources/js/http/query_string_from_params.js","webpack:///./resources/js/components/admin/GlobalMetrics.vue?b99f","webpack:///./resources/js/components/admin/GlobalMetrics.vue?c379","webpack:///./node_modules/vue-loader/lib/runtime/componentNormalizer.js","webpack:///./resources/js/components/admin/GlobalMetrics.vue?4139","webpack:///./resources/js/resources/volunteers/get_metrics.js","webpack:///resources/js/components/admin/GlobalMetrics.vue","webpack:///./resources/js/components/admin/GlobalMetrics.vue?d6c3","webpack:///./resources/js/components/admin/GlobalMetrics.vue","webpack:///./resources/js/components/admin/GlobalMetrics.vue?feb0"],"names":["queryStringFromParams","params","paginate","parsedParams","Object","keys","includes","filter","rest","queryStringParts","push","currentPage","param","undefined","Array","isArray","forEach","val","encodeURIComponent","join","content","module","i","options","transform","locals","exports","normalizeComponent","scriptExports","render","staticRenderFns","functionalTemplate","injectStyles","scopeId","moduleIdentifier","shadowMode","hook","_compiled","functional","_scopeId","context","this","$vnode","ssrContext","parent","__VUE_SSR_CONTEXT__","call","_registeredComponents","add","_ssrRegister","$root","$options","shadowRoot","_injectStyles","originalRender","h","existing","beforeCreate","concat","a","window","axios","get","then","response","data","start_date","component","_vm","_h","$createElement","_c","_self","attrs","on","updateFilters","slot","staticClass","model","value","callback","$$v","startDate","expression","_v","endDate","loading","hasMetrics","_l","metric","index","key","_s","_f","_e"],"mappings":"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","file":"js/modules/global-metrics.f844ed5a5703771aa869.js","sourcesContent":["const queryStringFromParams = function (params = {}, paginate) {\n    let parsedParams = params;\n    if (Object.keys(params).includes('filter')) {\n        let {filter, ...rest} = params;\n        parsedParams = {...filter, ...rest};\n    }\n\n    let queryStringParts = [];\n    if (paginate) {\n        queryStringParts.push('page=' + (parsedParams.currentPage ? parsedParams.currentPage : 1))\n    }\n\n    delete (parsedParams.currentPage)\n    \n    for (let param in parsedParams) {\n        if (parsedParams[param] === null || parsedParams[param] === undefined) {\n            continue;\n        }\n\n        if (Array.isArray(parsedParams[param]) ) {\n            parsedParams[param].forEach(val => {\n                queryStringParts.push(encodeURIComponent(param) + '[]=' + encodeURIComponent(val));\n            })\n        } else {\n            queryStringParts.push(encodeURIComponent(param) + '=' + encodeURIComponent(parsedParams[param]));\n        }\n\n    }\n   \n    return queryStringParts.join('&');    \n}\n\nexport default queryStringFromParams;","\nvar content = require(\"!!../../../../node_modules/css-loader/index.js??ref--6-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GlobalMetrics.vue?vue&type=style&index=0&lang=css&\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../node_modules/css-loader/index.js??ref--6-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GlobalMetrics.vue?vue&type=style&index=0&lang=css&\", function() {\n\t\tvar newContent = require(\"!!../../../../node_modules/css-loader/index.js??ref--6-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GlobalMetrics.vue?vue&type=style&index=0&lang=css&\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","import mod from \"-!../../../../node_modules/style-loader/index.js!../../../../node_modules/css-loader/index.js??ref--6-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GlobalMetrics.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/style-loader/index.js!../../../../node_modules/css-loader/index.js??ref--6-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GlobalMetrics.vue?vue&type=style&index=0&lang=css&\"","/* globals __VUE_SSR_CONTEXT__ */\n\n// IMPORTANT: Do NOT use ES2015 features in this file (except for modules).\n// This module is a runtime utility for cleaner component module output and will\n// be included in the final webpack user bundle.\n\nexport default function normalizeComponent (\n  scriptExports,\n  render,\n  staticRenderFns,\n  functionalTemplate,\n  injectStyles,\n  scopeId,\n  moduleIdentifier, /* server only */\n  shadowMode /* vue-cli only */\n) {\n  // Vue.extend constructor export interop\n  var options = typeof scriptExports === 'function'\n    ? scriptExports.options\n    : scriptExports\n\n  // render functions\n  if (render) {\n    options.render = render\n    options.staticRenderFns = staticRenderFns\n    options._compiled = true\n  }\n\n  // functional template\n  if (functionalTemplate) {\n    options.functional = true\n  }\n\n  // scopedId\n  if (scopeId) {\n    options._scopeId = 'data-v-' + scopeId\n  }\n\n  var hook\n  if (moduleIdentifier) { // server build\n    hook = function (context) {\n      // 2.3 injection\n      context =\n        context || // cached call\n        (this.$vnode && this.$vnode.ssrContext) || // stateful\n        (this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext) // functional\n      // 2.2 with runInNewContext: true\n      if (!context && typeof __VUE_SSR_CONTEXT__ !== 'undefined') {\n        context = __VUE_SSR_CONTEXT__\n      }\n      // inject component styles\n      if (injectStyles) {\n        injectStyles.call(this, context)\n      }\n      // register component module identifier for async chunk inferrence\n      if (context && context._registeredComponents) {\n        context._registeredComponents.add(moduleIdentifier)\n      }\n    }\n    // used by ssr in case component is cached and beforeCreate\n    // never gets called\n    options._ssrRegister = hook\n  } else if (injectStyles) {\n    hook = shadowMode\n      ? function () {\n        injectStyles.call(\n          this,\n          (options.functional ? this.parent : this).$root.$options.shadowRoot\n        )\n      }\n      : injectStyles\n  }\n\n  if (hook) {\n    if (options.functional) {\n      // for template-only hot-reload because in that case the render fn doesn't\n      // go through the normalizer\n      options._injectStyles = hook\n      // register for functional component in vue file\n      var originalRender = options.render\n      options.render = function renderWithStyleInjection (h, context) {\n        hook.call(context)\n        return originalRender(h, context)\n      }\n    } else {\n      // inject component registration as beforeCreate hook\n      var existing = options.beforeCreate\n      options.beforeCreate = existing\n        ? [].concat(existing, hook)\n        : [hook]\n    }\n  }\n\n  return {\n    exports: scriptExports,\n    options: options\n  }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('volunteer-filters',{attrs:{\"hide-search\":true},on:{\"filters-changed\":_vm.updateFilters}},[_c('div',{attrs:{\"slot\":\"before\"},slot:\"before\"},[_c('div',{staticClass:\"form-inline pr-3 border-right\"},[_c('date-field',{staticClass:\"form-control form-control-sm\",attrs:{\"placeholder\":\"Start date\"},on:{\"input\":_vm.updateFilters},model:{value:(_vm.startDate),callback:function ($$v) {_vm.startDate=$$v},expression:\"startDate\"}}),_vm._v(\"\\n                 - \\n                \"),_c('date-field',{staticClass:\"form-control form-control-sm\",attrs:{\"placeholder\":\"End date\"},on:{\"input\":_vm.updateFilters},model:{value:(_vm.endDate),callback:function ($$v) {_vm.endDate=$$v},expression:\"endDate\"}})],1)])]),_vm._v(\" \"),_c('div',{staticClass:\"d-relative chart-container mt-1\"},[(!_vm.loading || _vm.hasMetrics)?_c('div',{staticClass:\"d-flex flex-wrap\"},_vm._l((_vm.metrics),function(metric,index){return _c('div',{key:index,staticClass:\"pie-container px-1\"},[_c('h4',{staticClass:\"text-center\"},[_vm._v(_vm._s(_vm._f(\"titleCase\")(index)))]),_vm._v(\" \"),_c('pie-chart',{attrs:{\"chart-data\":metric}})],1)}),0):_vm._e(),_vm._v(\" \"),(_vm.loading)?_c('div',{staticClass:\"text-muted text-center p-1 w-100 h-100 p-absolute\"},[_vm._v(\"Loading...\")]):_vm._e()])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import queryStringFromParams from '../../http/query_string_from_params';\n\nexport default async function(params) {\n\n    if (typeof params === 'object') {\n        params = queryStringFromParams(params);\n    }\n    return await window.axios.get('/api/volunteers/metrics' + ((params) ? '?' + params : ''))\n        .then(response => response.data)\n}","<style>\n    .charts-container {\n        min-height: 150px;\n    }\n    .pie-container {\n        width: 225px;\n    }\n</style>\n<template>\n    <div>\n        <volunteer-filters @filters-changed=\"updateFilters\" :hide-search=\"true\">\n            <div slot=\"before\">\n                <div class=\"form-inline pr-3 border-right\">\n                    <date-field v-model=\"startDate\" class=\"form-control form-control-sm\" placeholder=\"Start date\" @input=\"updateFilters\"/>\n                    &nbsp;-&nbsp;\n                    <date-field v-model=\"endDate\" class=\"form-control form-control-sm\" placeholder=\"End date\" @input=\"updateFilters\"/>\n                </div>\n            </div>\n        </volunteer-filters>\n        <div class=\"d-relative chart-container mt-1\">\n            <div class=\"d-flex flex-wrap\" v-if=\"!loading || hasMetrics\">\n                <div v-for=\"(metric, index) in metrics\" :key=\"index\" class=\"pie-container px-1\">\n                    <h4 class=\"text-center\">{{index|titleCase}}</h4>\n                    <pie-chart :chart-data=\"metric\"></pie-chart>\n                </div>\n            </div>\n            <div class=\"text-muted text-center p-1 w-100 h-100 p-absolute\" v-if=\"loading\">Loading...</div>\n        </div>\n    </div>\n</template>\n<script>\nimport getMetrics from '../../resources/volunteers/get_metrics'\nimport {omitBy, isUndefined} from 'lodash';\nimport moment from 'moment-timezone';\n\nexport default {\n    data() {\n        return {\n            metrics: {},\n            startDate: null,\n            endDate: null,\n            volunteerFilters: {},\n            loading: false\n        }\n    },\n    filters: {\n        titleCase(title) {\n            if (typeof title != 'string') \n                return title;\n\n            return title.replace(/id/, '')\n                    .toLowerCase()\n                    .split('_')\n                    .map(word => word.charAt(0).toUpperCase()+word.slice(1))\n                    .join(' ');\n        }\n    },\n    computed: {\n        hasMetrics() {\n            return Object.keys(this.metrics).length > 0;\n        }\n    },\n    methods: {\n        async getMetrics() {\n            const staticParams = {};\n\n            let params = {...staticParams, ...this.volunteerFilters};\n            console.info('this.startDate', this.startDate)\n            if (this.startDate) {\n                console.info('this.startDate', this.startDate)\n                if (this.startDate instanceof moment) {\n                    params.start_date = this.startDate.format('YYYY-MM-DD');\n                } else {\n                    params.start_date = moment(this.startDate).format('YYYY-MM-DD');\n                }\n            }\n            if (this.endDate) {\n                params.end_date = moment(this.endDate).format('YYYY-MM-DD');\n            }\n            params = omitBy(params, isUndefined);\n            this.loading = true;\n            this.metrics = await getMetrics(params);\n            this.loading = false;\n        },\n        updateFilters(filters) {\n            this.volunterFilters = {...this.volunterFilters, ...filters};\n            this.getMetrics();\n        }\n    },\n    mounted() {\n        console.log()\n        this.getMetrics();\n    }\n}\n</script>","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GlobalMetrics.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GlobalMetrics.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./GlobalMetrics.vue?vue&type=template&id=7a9b74d2&\"\nimport script from \"./GlobalMetrics.vue?vue&type=script&lang=js&\"\nexport * from \"./GlobalMetrics.vue?vue&type=script&lang=js&\"\nimport style0 from \"./GlobalMetrics.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".charts-container{min-height:150px}.pie-container{width:225px}\", \"\"]);\n\n// exports\n"],"sourceRoot":""}