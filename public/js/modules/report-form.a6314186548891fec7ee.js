(window.webpackJsonp=window.webpackJsonp||[]).push([[21,32],{"3FaR":function(t,e,r){var n=r("R/0+");"string"==typeof n&&(n=[[t.i,n,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};r("aET+")(n,i);n.locals&&(t.exports=n.locals)},"E/Wf":function(t,e,r){"use strict";var n=r("3FaR");r.n(n).a},EhJ5:function(t,e,r){"use strict";r.r(e);var n=r("nFi+"),i=r("1Iqk"),o=r("wd/R"),a=r.n(o);function s(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function l(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?s(Object(r),!0).forEach((function(e){u(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function u(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var c={components:{VolunteerFilters:n.default},props:{},data:function(){return{reportTypes:[],reportUrl:null,currentFilters:null,startDate:null,endDate:null}},computed:{},methods:{getReportTypes:function(){this.reportTypes={"/assignments-report":"Assignment Report","/applications-report":"Application Report"}},handleFiltersChanged:function(t){this.currentFilters=t},resetForm:function(){this.currentFilters=null,this.reportUrl=null,this.startDate=null,this.endDate=null,console.info("this.$refs.volunteerFilters",this.$refs.volunteerFilters),this.$refs.volunteerFilters.reset()},getReport:function(){var t=l(l({},t),this.currentFilters);this.startDate&&(t.start_date=a()(this.startDate).format("YYYY-MM-DD")),this.endDate&&(t.end_date=a()(this.endDate).format("YYYY-MM-DD"));var e=this.reportUrl+"?"+Object(i.a)(t);window.location=e}},mounted:function(){this.getReportTypes()}},f=r("KHd+"),p=Object(f.a)(c,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"form-group form-inline"},[r("label",{attrs:{for:"report-type"}},[t._v("Report type: ")]),t._v("\n         \n        "),r("select",{directives:[{name:"model",rawName:"v-model",value:t.reportUrl,expression:"reportUrl"}],staticClass:"form-control form-control-sm",attrs:{id:"report-type"},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.reportUrl=e.target.multiple?r:r[0]}}},t._l(t.reportTypes,(function(e,n){return r("option",{key:e,domProps:{value:n}},[t._v(t._s(e))])})),0)]),t._v(" "),r("volunteer-filters",{ref:"volunteerFilters",attrs:{"hide-search":!0},on:{"filters-changed":t.handleFiltersChanged},scopedSlots:t._u([{key:"before",fn:function(){return[r("label",{attrs:{for:""}},[t._v(" Filters:")])]},proxy:!0}])}),t._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:"/applications-report"==t.reportUrl,expression:"reportUrl == '/applications-report'"}],staticClass:"form-group form-inline"},[r("label",{attrs:{for:"start-date"}},[t._v("Date range:")]),t._v("\n         \n        "),r("date-field",{staticClass:"form-control form-control-sm",model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}}),t._v("\n         to \n        "),r("date-field",{staticClass:"form-control form-control-sm",model:{value:t.endDate,callback:function(e){t.endDate=e},expression:"endDate"}})],1),t._v(" "),r("div",{staticClass:"form-group"},[r("button",{staticClass:"btn btn-light border btn-sm",on:{click:t.resetForm}},[t._v("Reset")]),t._v(" "),r("button",{staticClass:"btn btn-primary btn-sm",attrs:{disabled:null===t.reportUrl},on:{click:t.getReport}},[t._v("Get report")])])],1)}),[],!1,null,null,null);e.default=p.exports},"KHd+":function(t,e,r){"use strict";function n(t,e,r,n,i,o,a,s){var l,u="function"==typeof t?t.options:t;if(e&&(u.render=e,u.staticRenderFns=r,u._compiled=!0),n&&(u.functional=!0),o&&(u._scopeId="data-v-"+o),a?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},u._ssrRegister=l):i&&(l=s?function(){i.call(this,(u.functional?this.parent:this).$root.$options.shadowRoot)}:i),l)if(u.functional){u._injectStyles=l;var c=u.render;u.render=function(t,e){return l.call(e),c(t,e)}}else{var f=u.beforeCreate;u.beforeCreate=f?[].concat(f,l):[l]}return{exports:t,options:u}}r.d(e,"a",(function(){return n}))},NBHl:function(t,e,r){"use strict";var n=r("o0o1"),i=r.n(n);function o(t,e,r,n,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void r(t)}s.done?e(l):Promise.resolve(l).then(n,i)}var a=function(){var t,e=(t=i.a.mark((function t(){var e;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=JSON.parse(localStorage.getItem("volunteer-types"))){t.next=5;break}return t.next=4,window.axios.get("/api/volunteer-types").then((function(t){return localStorage.setItem("volunteer-types",JSON.stringify(t.data.data)),t.data.data}));case 4:e=t.sent;case 5:return t.abrupt("return",e);case 6:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,i){var a=t.apply(e,r);function s(t){o(a,n,i,s,l,"next",t)}function l(t){o(a,n,i,s,l,"throw",t)}s(void 0)}))});return function(){return e.apply(this,arguments)}}();e.a=a},Qsky:function(t,e,r){"use strict";var n=r("o0o1"),i=r.n(n),o=r("g6NE");function a(t,e,r,n,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void r(t)}s.done?e(l):Promise.resolve(l).then(n,i)}var s=function(){var t,e=(t=i.a.mark((function t(){var e;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=Object.keys(o.a.state.configs.volunteers.statuses).map((function(t){return{name:t,id:o.a.state.configs.volunteers.statuses[t]}})),console.log(e),t.abrupt("return",e);case 3:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function s(t){a(o,n,i,s,l,"next",t)}function l(t){a(o,n,i,s,l,"throw",t)}s(void 0)}))});return function(){return e.apply(this,arguments)}}();e.a=s},"R/0+":function(t,e,r){(t.exports=r("I1BE")(!1)).push([t.i,".flex-row[data-v-69695fa4]{display:flex}.d-flex>*[data-v-69695fa4],.flex-row>div[data-v-69695fa4]{margin-right:1rem}.flex-row>div[data-v-69695fa4]:last-child{margin-right:0}",""])},"nFi+":function(t,e,r){"use strict";r.r(e);var n=r("o0o1"),i=r.n(n),o=r("gwWm"),a=r("IAky"),s=r("Qsky"),l=r("NBHl");function u(t,e,r,n,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void r(t)}s.done?e(l):Promise.resolve(l).then(n,i)}function c(t){return function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(t){u(o,n,i,a,s,"next",t)}function s(t){u(o,n,i,a,s,"throw",t)}a(void 0)}))}}var f={props:{hideSearch:{required:!1,default:!1}},data:function(){return{filters:{searchTerm:null,volunteer_type_id:null,volunteer_status_id:null,curation_activity_id:null,curation_group_id:null},volunteerTypes:[],volunteerStatuses:[],activities:[],panels:[]}},computed:{activeFilters:function(){var t=this;return Object.keys(this.filters).filter((function(e){return null!==t.filters[e]})).reduce((function(e,r){return e[r]=t.filters[r],e}),{})},filteredCurationGroups:function(){var t=this;return this.panels?this.filters.curation_activity_id?this.panels.filter((function(e){return e.curation_activity_id==t.filters.curation_activity_id})):this.panels:[]}},watch:{filters:{handler:function(t,e){this.$emit("filters-changed",this.filters),this.$emit("input",this.filters)},deep:!0}},methods:{reconcileFilters:function(){1==this.filters.volunteer_type_id&&(this.filters.curation_activity_id=null,this.filters.curation_group_id=null)},getCurationActivities:function(){var t=this;return c(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(a.a)();case 2:t.activities=e.sent;case 3:case"end":return e.stop()}}),e)})))()},getCurationGroups:function(){var t=this;return c(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(o.a)();case 2:t.panels=e.sent;case 3:case"end":return e.stop()}}),e)})))()},getStatuses:function(){var t=this;return c(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(s.a)();case 2:t.volunteerStatuses=e.sent;case 3:case"end":return e.stop()}}),e)})))()},getTypes:function(){var t=this;return c(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(l.a)();case 2:t.volunteerTypes=e.sent;case 3:case"end":return e.stop()}}),e)})))()},reset:function(){this.filters={searchTerm:null,volunteer_type_id:null,volunteer_status_id:null,curation_activity_id:null,curation_group_id:null}}},mounted:function(){this.getCurationActivities(),this.getCurationGroups(),this.getStatuses(),this.getTypes()}},p=(r("E/Wf"),r("KHd+")),v=Object(p.a)(f,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"d-flex mb-2 p-0 filter-row"},[t._t("before"),t._v(" "),t.hideSearch?t._e():r("div",{staticClass:"form-inline border-right pr-3"},[r("label",{attrs:{for:"filter-input"}},[t._v("Search:")]),t._v("\n         \n        "),r("b-form-input",{staticClass:"form-control form-control-sm",attrs:{type:"text",placeholder:"filter rows",id:"filter-input",debounce:250},model:{value:t.filters.searchTerm,callback:function(e){t.$set(t.filters,"searchTerm",e)},expression:"filters.searchTerm"}})],1),t._v(" "),r("div",{staticClass:"pl-3",attrs:{id:"type-filter-container"}},[r("select",{directives:[{name:"model",rawName:"v-model",value:t.filters.volunteer_type_id,expression:"filters.volunteer_type_id"}],staticClass:"form-control form-control-sm",class:{active:t.filters.volunteer_type_id},attrs:{id:"type-select"},on:{change:[function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.filters,"volunteer_type_id",e.target.multiple?r:r[0])},t.reconcileFilters]}},[r("option",{domProps:{value:null}},[t._v("Any Type")]),t._v(" "),t._l(t.volunteerTypes,(function(e,n){return r("option",{key:n,domProps:{value:e.id}},[t._v("\n                "+t._s(e.name)+"\n            ")])}))],2)]),t._v(" "),r("div",{attrs:{id:"status-filter-container"}},[r("select",{directives:[{name:"model",rawName:"v-model",value:t.filters.volunteer_status_id,expression:"filters.volunteer_status_id"}],staticClass:"form-control form-control-sm",class:{active:t.filters.volunteer_status_id},attrs:{id:"status-select"},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.filters,"volunteer_status_id",e.target.multiple?r:r[0])}}},[r("option",{domProps:{value:null}},[t._v("Any Status")]),t._v(" "),t._l(t.volunteerStatuses,(function(e,n){return r("option",{key:n,domProps:{value:e.id}},[t._v("\n                "+t._s(e.name)+"\n            ")])}))],2)]),t._v(" "),r("div",{attrs:{id:"curation-activity-filter-container"}},[r("select",{directives:[{name:"model",rawName:"v-model",value:t.filters.curation_activity_id,expression:"filters.curation_activity_id"}],staticClass:"form-control form-control-sm",class:{active:t.filters.curation_activity_id},attrs:{id:"activity-select",disabled:1==t.filters.volunteer_type_id},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.filters,"curation_activity_id",e.target.multiple?r:r[0])}}},[r("option",{domProps:{value:null}},[t._v("Any Activity")]),t._v(" "),t._l(t.activities,(function(e,n){return r("option",{key:n,domProps:{value:e.id}},[t._v("\n                "+t._s(e.name)+"\n            ")])})),t._v(" "),r("option",{domProps:{value:-1}},[t._v("Not Assigned to activity")])],2)]),t._v(" "),r("div",{attrs:{id:"curation-group-filter-container"}},[r("select",{directives:[{name:"model",rawName:"v-model",value:t.filters.curation_group_id,expression:"filters.curation_group_id"}],staticClass:"form-control form-control-sm",class:{active:t.filters.curation_group_id},staticStyle:{"max-width":"200px"},attrs:{id:"panel-select",disabled:1==t.filters.volunteer_type_id},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.filters,"curation_group_id",e.target.multiple?r:r[0])}}},[r("option",{domProps:{value:null}},[t._v("Any Curation Group")]),t._v(" "),r("option",{domProps:{value:-1}},[t._v("Not assigned to curation group")]),t._v(" "),t._l(t.filteredCurationGroups,(function(e,n){return r("option",{key:n,domProps:{value:e.id}},[t._v("\n                "+t._s(e.name)+"\n            ")])}))],2)]),t._v(" "),t._t("after")],2)}),[],!1,null,"69695fa4",null);e.default=v.exports}}]);
//# sourceMappingURL=report-form.a6314186548891fec7ee.js.map