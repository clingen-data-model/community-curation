(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{"+xH0":function(t,e,r){(t.exports=r("I1BE")(!1)).push([t.i,".flex-row{display:flex}.flex-row>div{margin-right:1rem}.flex-row>div:last-child{margin-right:0}",""])},"1Iqk":function(t,e,r){"use strict";function n(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function o(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?n(Object(r),!0).forEach((function(e){i(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function i(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function a(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r,n,o={},i=Object.keys(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}e.a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0,r=t;if(Object.keys(t).includes("filter")){var n=t.filter,i=a(t,["filter"]);r=o(o({},n),i)}var s=[];e&&s.push("page="+(r.currentPage?r.currentPage:1)),delete r.currentPage;var c=function(t){if(null===r[t]||void 0===r[t])return"continue";Array.isArray(r[t])?r[t].forEach((function(e){s.push(encodeURIComponent(t)+"[]="+encodeURIComponent(e))})):s.push(encodeURIComponent(t)+"="+encodeURIComponent(r[t]))};for(var u in r)c(u);return s.join("&")}},BTKh:function(t,e,r){"use strict";var n=r("bFaN");r.n(n).a},NBHl:function(t,e,r){"use strict";var n=r("o0o1"),o=r.n(n);function i(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}var a=function(){var t,e=(t=o.a.mark((function t(){var e;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=JSON.parse(localStorage.getItem("volunteer-types"))){t.next=5;break}return t.next=4,window.axios.get("/api/volunteer-types").then((function(t){return localStorage.setItem("volunteer-types",JSON.stringify(t.data.data)),t.data.data}));case 4:e=t.sent;case 5:return t.abrupt("return",e);case 6:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function s(t){i(a,n,o,s,c,"next",t)}function c(t){i(a,n,o,s,c,"throw",t)}s(void 0)}))});return function(){return e.apply(this,arguments)}}();e.a=a},Qsky:function(t,e,r){"use strict";var n=r("o0o1"),o=r.n(n);function i(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}var a=function(){var t,e=(t=o.a.mark((function t(){var e;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=JSON.parse(localStorage.getItem("volunteer-statuses"))){t.next=5;break}return t.next=4,window.axios.get("/api/volunteer-statuses").then((function(t){return localStorage.setItem("volunteer-statuses",JSON.stringify(t.data.data)),t.data.data}));case 4:e=t.sent;case 5:return t.abrupt("return",e);case 6:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function s(t){i(a,n,o,s,c,"next",t)}function c(t){i(a,n,o,s,c,"throw",t)}s(void 0)}))});return function(){return e.apply(this,arguments)}}();e.a=a},bFaN:function(t,e,r){var n=r("+xH0");"string"==typeof n&&(n=[[t.i,n,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};r("aET+")(n,o);n.locals&&(t.exports=n.locals)},d8pl:function(t,e,r){"use strict";r.r(e);var n=r("o0o1"),o=r.n(n),i=r("evv0"),a=r("1Iqk");function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function u(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){c(i,n,o,a,s,"next",t)}function s(t){c(i,n,o,a,s,"throw",t)}a(void 0)}))}}var l=function(t){return f.apply(this,arguments)};function f(){return(f=u(o.a.mark((function t(e){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"object"===s(e)&&(e=Object(a.a)(e)),t.next=3,window.axios.get("/api/volunteers/metrics"+(e?"?"+e:"")).then((function(t){return t.data}));case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var p=r("nFi+"),v=r("LvDl"),d=r("f0Wu"),h=r.n(d);function m(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function y(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?m(Object(r),!0).forEach((function(e){_(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function _(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function b(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}var g={components:{VolunteerFilters:p.a,PieChart:i.a},data:function(){return{metrics:{},startDate:null,endDate:null,volunteerFilters:{}}},filters:{titleCase:function(t){return"string"!=typeof t?t:t.replace(/id/,"").toLowerCase().split("_").map((function(t){return t.charAt(0).toUpperCase()+t.slice(1)})).join(" ")}},methods:{getMetrics:function(){var t,e=this;return(t=o.a.mark((function t(){var r,n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={},console.log(e.volunteerFilters),n=y(y({},r),e.volunteerFilters),console.info("this.startDate",e.startDate),e.startDate&&(console.info("this.startDate",e.startDate),e.startDate instanceof h.a?n.start_date=e.startDate.format("YYYY-MM-DD"):n.start_date=h()(e.startDate).format("YYYY-MM-DD")),e.endDate&&(n.end_date=h()(e.endDate).format("YYYY-MM-DD")),n=Object(v.omitBy)(n,v.isUndefined),console.log(n),t.next=10,l(n);case 10:e.metrics=t.sent;case 11:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){b(i,n,o,a,s,"next",t)}function s(t){b(i,n,o,a,s,"throw",t)}a(void 0)}))})()},updateFilters:function(t){this.volunterFilters=y(y({},this.volunterFilters),t),this.getMetrics()}},mounted:function(){console.log(),this.getMetrics()}},O=r("KHd+"),w=Object(O.a)(g,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("volunteer-filters",{attrs:{"hide-search":!0},on:{"filters-changed":t.updateFilters}},[r("div",{attrs:{slot:"before"},slot:"before"},[r("div",{staticClass:"form-inline pr-3 border-right"},[r("date-field",{staticClass:"form-control form-control-sm",attrs:{placeholder:"Start date"},on:{input:t.updateFilters},model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}}),t._v("\n                 - \n                "),r("date-field",{staticClass:"form-control form-control-sm",attrs:{placeholder:"End date"},on:{input:t.updateFilters},model:{value:t.endDate,callback:function(e){t.endDate=e},expression:"endDate"}})],1)])]),t._v(" "),r("div",{staticClass:"d-flex"},t._l(t.metrics,(function(e,n){return r("div",{key:n,staticClass:"mr-1 w-50"},[r("h3",{staticClass:"text-center"},[t._v(t._s(t._f("titleCase")(n)))]),t._v(" "),r("pie-chart",{attrs:{"chart-data":e}})],1)})),0)],1)}),[],!1,null,null,null);e.default=w.exports},evv0:function(t,e,r){"use strict";var n=r("MO+k"),o=r.n(n);function i(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function a(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?i(Object(r),!0).forEach((function(e){s(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function s(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var c={props:{chartData:{type:Object,required:!0},options:{type:Object,default:function(){return{}}},title:{type:String}},data:function(){return{chart:null,colors:[],defaultConfig:{legend:{position:"left",display:!1}}}},watch:{chartData:{deep:!0,handler:function(){this.renderChart()}}},methods:{clearChart:function(){null!==this.chart&&this.chart.destroy()},renderChart:function(t,e){var r=this;this.clearChart();var n={type:"pie",data:{labels:Object.keys(this.chartData),datasets:[{label:"test",data:Object.values(this.chartData),backgroundColor:function(t){if(r.colors.length<Object.keys(r.chartData).length){if("unknown"==Object.keys(r.chartData)[t.dataIndex].toLowerCase())return void r.$set(r.colors,t.dataIndex,"rgba(100,100,100,.4)");r.$set(r.colors,t.dataIndex,r.generateRandomColor())}return r.colors[t.dataIndex]}}]},options:a(a({},this.defaultConfig),this.options)};this.chart=new o.a(this.$refs.chartCanvas.getContext("2d"),n)},generateRandomColor:function(t){for(var e=function(){return Math.floor(Math.random()*Math.floor(256))},r="rgba(".concat(e(),",").concat(e(),",").concat(e(),",0.4)");"rgba(100,100,100,0.4)"==r;)r="rgba(".concat(e(),",").concat(e(),",").concat(e(),",0.4)");return r}},mounted:function(){this.renderChart()}},u=r("KHd+"),l=Object(u.a)(c,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"chart pie-chart"},[e("canvas",{ref:"chartCanvas"})])}),[],!1,null,null,null);e.a=l.exports},"nFi+":function(t,e,r){"use strict";var n=r("o0o1"),o=r.n(n),i=r("gwWm"),a=r("IAky"),s=r("Qsky"),c=r("NBHl");function u(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function l(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){u(i,n,o,a,s,"next",t)}function s(t){u(i,n,o,a,s,"throw",t)}a(void 0)}))}}var f={props:{hideSearch:{required:!1,default:!1}},data:function(){return{filters:{searchTerm:null,volunteer_type_id:null,volunteer_status_id:null,curation_activity_id:null,curation_group_id:null},volunteerTypes:[],volunteerStatuses:[],activities:[],panels:[]}},computed:{activeFilters:function(){var t=this;return Object.keys(this.filters).filter((function(e){return null!==t.filters[e]})).reduce((function(e,r){return e[r]=t.filters[r],e}),{})},filteredCurationGroups:function(){var t=this;return this.panels?this.filters.curation_activity_id?this.panels.filter((function(e){return e.curation_activity_id==t.filters.curation_activity_id})):this.panels:[]}},watch:{filters:{handler:function(t,e){this.$emit("filters-changed",this.filters)},deep:!0}},methods:{reconcileFilters:function(){1==this.filters.volunteer_type_id&&(this.filters.curation_activity_id=null,this.filters.curation_group_id=null)},getCurationActivities:function(){var t=this;return l(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(a.a)();case 2:t.activities=e.sent;case 3:case"end":return e.stop()}}),e)})))()},getCurationGroups:function(){var t=this;return l(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(i.a)();case 2:t.panels=e.sent;case 3:case"end":return e.stop()}}),e)})))()},getStatuses:function(){var t=this;return l(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(s.a)();case 2:t.volunteerStatuses=e.sent;case 3:case"end":return e.stop()}}),e)})))()},getTypes:function(){var t=this;return l(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(c.a)();case 2:t.volunteerTypes=e.sent;case 3:case"end":return e.stop()}}),e)})))()},reset:function(){this.filters={searchTerm:null,volunteer_type_id:null,volunteer_status_id:null,curation_activity_id:null,curation_group_id:null}}},mounted:function(){this.getCurationActivities(),this.getCurationGroups(),this.getStatuses(),this.getTypes()}},p=(r("BTKh"),r("KHd+")),v=Object(p.a)(f,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"flex-row mb-2 p-0 filter-row"},[t._t("before"),t._v(" "),t.hideSearch?t._e():r("div",{staticClass:"form-inline border-right pr-3"},[r("label",{attrs:{for:"filter-input"}},[t._v("Search:")]),t._v("\n         \n        "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.filters.searchTerm,expression:"filters.searchTerm"}],staticClass:"form-control form-control-sm",attrs:{type:"text",placeholder:"filter rows",id:"filter-input"},domProps:{value:t.filters.searchTerm},on:{input:function(e){e.target.composing||t.$set(t.filters,"searchTerm",e.target.value)}}})]),t._v(" "),r("div",{staticClass:"pl-3",attrs:{id:"type-filter-container"}},[r("select",{directives:[{name:"model",rawName:"v-model",value:t.filters.volunteer_type_id,expression:"filters.volunteer_type_id"}],staticClass:"form-control form-control-sm",class:{active:t.filters.volunteer_type_id},attrs:{id:"type-select"},on:{change:[function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.filters,"volunteer_type_id",e.target.multiple?r:r[0])},t.reconcileFilters]}},[r("option",{domProps:{value:null}},[t._v("Any Type")]),t._v(" "),t._l(t.volunteerTypes,(function(e,n){return r("option",{key:n,domProps:{value:e.id}},[t._v("\n                "+t._s(e.name)+"\n            ")])}))],2)]),t._v(" "),r("div",{attrs:{id:"status-filter-container"}},[r("select",{directives:[{name:"model",rawName:"v-model",value:t.filters.volunteer_status_id,expression:"filters.volunteer_status_id"}],staticClass:"form-control form-control-sm",class:{active:t.filters.volunteer_status_id},attrs:{id:"status-select"},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.filters,"volunteer_status_id",e.target.multiple?r:r[0])}}},[r("option",{domProps:{value:null}},[t._v("Any Status")]),t._v(" "),t._l(t.volunteerStatuses,(function(e,n){return r("option",{key:n,domProps:{value:e.id}},[t._v("\n                "+t._s(e.name)+"\n            ")])}))],2)]),t._v(" "),r("div",{attrs:{id:"curation-activity-filter-container"}},[r("select",{directives:[{name:"model",rawName:"v-model",value:t.filters.curation_activity_id,expression:"filters.curation_activity_id"}],staticClass:"form-control form-control-sm",class:{active:t.filters.curation_activity_id},attrs:{id:"activity-select",disabled:1==t.filters.volunteer_type_id},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.filters,"curation_activity_id",e.target.multiple?r:r[0])}}},[r("option",{domProps:{value:null}},[t._v("Any Activity")]),t._v(" "),t._l(t.activities,(function(e,n){return r("option",{key:n,domProps:{value:e.id}},[t._v("\n                "+t._s(e.name)+"\n            ")])})),t._v(" "),r("option",{domProps:{value:-1}},[t._v("Not Assigned to activity")])],2)]),t._v(" "),r("div",{attrs:{id:"curation-group-filter-container"}},[r("select",{directives:[{name:"model",rawName:"v-model",value:t.filters.curation_group_id,expression:"filters.curation_group_id"}],staticClass:"form-control form-control-sm",class:{active:t.filters.curation_group_id},staticStyle:{"max-width":"200px"},attrs:{id:"panel-select",disabled:1==t.filters.volunteer_type_id},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.filters,"curation_group_id",e.target.multiple?r:r[0])}}},[r("option",{domProps:{value:null}},[t._v("Any Curation Group")]),t._v(" "),r("option",{domProps:{value:-1}},[t._v("Not assigned to curation group")]),t._v(" "),t._l(t.filteredCurationGroups,(function(e,n){return r("option",{key:n,domProps:{value:e.id}},[t._v("\n                "+t._s(e.name)+"\n            ")])}))],2)]),t._v(" "),t._t("after")],2)}),[],!1,null,null,null);e.a=v.exports}}]);
//# sourceMappingURL=global-metrics.674d5f23741b60f7d258.js.map