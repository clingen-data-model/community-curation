(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{"5RAZ":function(t,e,n){var r=n("Oprf");"string"==typeof r&&(r=[[t.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n("aET+")(r,o);r.locals&&(t.exports=r.locals)},"9p9/":function(t,e,n){"use strict";n("5RAZ")},"KHd+":function(t,e,n){"use strict";function r(t,e,n,r,o,i,a,s){var c,l="function"==typeof t?t.options:t;if(e&&(l.render=e,l.staticRenderFns=n,l._compiled=!0),r&&(l.functional=!0),i&&(l._scopeId="data-v-"+i),a?(c=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),o&&o.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},l._ssrRegister=c):o&&(c=s?function(){o.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:o),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(t,e){return c.call(e),u(t,e)}}else{var f=l.beforeCreate;l.beforeCreate=f?[].concat(f,c):[c]}return{exports:t,options:l}}n.d(e,"a",(function(){return r}))},Oprf:function(t,e,n){(t.exports=n("I1BE")(!1)).push([t.i,".charts-container[data-v-45d27aa8]{min-height:150px}.pie-container[data-v-45d27aa8]{width:225px}.loading[data-v-45d27aa8]{position:absolute;top:0;right:0;bottom:0;left:0;background-color:hsla(0,0%,100%,.5)}",""])},d8pl:function(t,e,n){"use strict";n.r(e);var r=n("o0o1"),o=n.n(r),i=n("1Iqk");function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e,n,r,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function c(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){s(i,r,o,a,c,"next",t)}function c(t){s(i,r,o,a,c,"throw",t)}a(void 0)}))}}var l=function(t){return u.apply(this,arguments)};function u(){return(u=c(o.a.mark((function t(e){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"object"===a(e)&&(e=Object(i.a)(e)),t.next=3,window.axios.get("/api/volunteers/metrics"+(e?"?"+e:"")).then((function(t){return t.data}));case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var f=n("LvDl");function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function p(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(Object(n),!0).forEach((function(e){v(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function v(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function h(t,e,n,r,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}var m={data:function(){return{metrics:{},startDate:null,endDate:null,volunteerFilters:{},loading:!1}},filters:{titleCase:function(t){return"string"!=typeof t?t:t.replace(/id/,"").toLowerCase().split("_").map((function(t){return t.charAt(0).toUpperCase()+t.slice(1)})).join(" ")}},computed:{hasMetrics:function(){return Object.keys(this.metrics).length>0},hasFilters:function(){var t=this;return!(!this.startDate&&!this.endDate)||Object.keys(this.volunteerFilters).filter((function(e){return null!==t.volunteerFilters[e]})).length>0}},methods:{getMetrics:function(){var t,e=this;return(t=o.a.mark((function t(){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=p(p({},{}),e.volunteerFilters),console.info("this.startDate",e.startDate),e.startDate&&(n.start_date=e.startDate),e.endDate&&(n.end_date=e.endDate),n=Object(f.omitBy)(n,f.isUndefined),e.loading=!0,t.next=9,l(n);case 9:e.metrics=t.sent,e.loading=!1;case 11:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){h(i,r,o,a,s,"next",t)}function s(t){h(i,r,o,a,s,"throw",t)}a(void 0)}))})()},updateFilters:function(t){for(var e in t)console.info("key in filters",[e,t[e]]),this.$set(this.volunteerFilters,e,t[e]);this.getMetrics()}},mounted:function(){console.log(),this.getMetrics()}},b=(n("9p9/"),n("KHd+")),y=Object(b.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("volunteer-filters",{attrs:{"hide-search":!0},on:{"filters-changed":t.updateFilters}},[n("div",{attrs:{slot:"before"},slot:"before"},[n("div",{staticClass:"form-inline pr-3 border-right"},[n("date-input",{staticClass:"form-control form-control-sm",attrs:{placeholder:"Start date"},on:{input:t.updateFilters},model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}}),t._v("\n                 - \n                "),n("date-input",{staticClass:"form-control form-control-sm",attrs:{placeholder:"End date"},on:{input:t.updateFilters},model:{value:t.endDate,callback:function(e){t.endDate=e},expression:"endDate"}})],1)])]),t._v(" "),n("div",{staticClass:"position-relative chart-container mt-1"},[t.hasFilters&&!t.hasMetrics?n("div",{staticClass:"alert alert-light text-center"},[t._v("\n            No volunteers matched your filters.\n        ")]):t._e(),t._v(" "),!t.loading||t.hasMetrics?n("div",{staticClass:"d-flex flex-wrap"},t._l(t.metrics,(function(e,r){return n("div",{key:r,staticClass:"pie-container px-1"},[n("h4",{staticClass:"text-center"},[t._v(t._s(t._f("titleCase")(r)))]),t._v(" "),n("pie-chart",{attrs:{"chart-data":e}})],1)})),0):t._e(),t._v(" "),t.loading?n("div",{staticClass:"text-muted text-center loading d-flex align-items-center justify-content-center"},[n("div",{staticClass:"alert alert-light border"},[t._v("Loading...")])]):t._e()])],1)}),[],!1,null,"45d27aa8",null);e.default=y.exports}}]);
//# sourceMappingURL=global-metrics.34fae543aeb04db6b68f.js.map