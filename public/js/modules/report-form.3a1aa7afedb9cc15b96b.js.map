{"version":3,"sources":["webpack:///./resources/js/http/query_string_from_params.js","webpack:///./resources/js/components/reports/ReportForm.vue","webpack:///resources/js/components/reports/ReportForm.vue","webpack:///./resources/js/components/reports/ReportForm.vue?db23","webpack:///./resources/js/components/reports/ReportForm.vue?e8eb"],"names":["queryStringFromParams","params","paginate","parsedParams","Object","keys","includes","filter","rest","queryStringParts","push","currentPage","param","undefined","Array","isArray","forEach","val","encodeURIComponent","join","components","VolunteerFilters","props","data","reportTypes","reportUrl","currentFilters","startDate","endDate","computed","methods","getReportTypes","handleFiltersChanged","resetForm","console","getReport","window","mounted","component","_vm","this","_c","_self","staticClass","attrs","_v","directives","name","rawName","value","expression","on","$event","$$selectedVal","prototype","call","target","options","o","selected","map","_value","multiple","_l","type","url","key","domProps","_s","ref","scopedSlots","_u","fn","proxy","model","callback","$$v"],"mappings":"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","file":"js/modules/report-form.3a1aa7afedb9cc15b96b.js","sourcesContent":["const queryStringFromParams = function (params = {}, paginate) {\n    let parsedParams = params;\n    if (Object.keys(params).includes('filter')) {\n        let {filter, ...rest} = params;\n        parsedParams = {...filter, ...rest};\n    }\n\n    let queryStringParts = [];\n    if (paginate) {\n        queryStringParts.push('page=' + (parsedParams.currentPage ? parsedParams.currentPage : 1))\n    }\n\n    delete (parsedParams.currentPage)\n    \n    for (let param in parsedParams) {\n        if (parsedParams[param] === null || parsedParams[param] === undefined) {\n            continue;\n        }\n\n        if (Array.isArray(parsedParams[param]) ) {\n            parsedParams[param].forEach(val => {\n                queryStringParts.push(encodeURIComponent(param) + '[]=' + encodeURIComponent(val));\n            })\n        } else {\n            queryStringParts.push(encodeURIComponent(param) + '=' + encodeURIComponent(parsedParams[param]));\n        }\n\n    }\n   \n    return queryStringParts.join('&');    \n}\n\nexport default queryStringFromParams;","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('div',{staticClass:\"form-group form-inline\"},[_c('label',{attrs:{\"for\":\"report-type\"}},[_vm._v(\"Report type: \")]),_vm._v(\"\\n         \\n        \"),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.reportUrl),expression:\"reportUrl\"}],staticClass:\"form-control form-control-sm\",attrs:{\"id\":\"report-type\"},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.reportUrl=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},_vm._l((_vm.reportTypes),function(type,url){return _c('option',{key:type,domProps:{\"value\":url}},[_vm._v(_vm._s(type))])}),0)]),_vm._v(\" \"),_c('volunteer-filters',{ref:\"volunteerFilters\",attrs:{\"hide-search\":true},on:{\"filters-changed\":_vm.handleFiltersChanged},scopedSlots:_vm._u([{key:\"before\",fn:function(){return [_c('label',{attrs:{\"for\":\"\"}},[_vm._v(\" Filters:\")])]},proxy:true}])}),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.reportUrl == '/applications-report'),expression:\"reportUrl == '/applications-report'\"}],staticClass:\"form-group form-inline\"},[_c('label',{attrs:{\"for\":\"start-date\"}},[_vm._v(\"Date range:\")]),_vm._v(\"\\n         \\n        \"),_c('date-input',{staticClass:\"form-control form-control-sm\",model:{value:(_vm.startDate),callback:function ($$v) {_vm.startDate=$$v},expression:\"startDate\"}}),_vm._v(\"\\n         to \\n        \"),_c('date-input',{staticClass:\"form-control form-control-sm\",model:{value:(_vm.endDate),callback:function ($$v) {_vm.endDate=$$v},expression:\"endDate\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"form-group\"},[_c('button',{staticClass:\"btn btn-light border btn-sm\",on:{\"click\":_vm.resetForm}},[_vm._v(\"Reset\")]),_vm._v(\" \"),_c('button',{staticClass:\"btn btn-primary btn-sm\",attrs:{\"disabled\":_vm.reportUrl === null},on:{\"click\":_vm.getReport}},[_vm._v(\"Get report\")])])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div>\n        <div class=\"form-group form-inline\">\n            <label for=\"report-type\">Report type: </label>\n            &nbsp;\n            <select v-model=\"reportUrl\" id=\"report-type\" class=\"form-control form-control-sm\">\n                <option v-for=\"(type, url) in reportTypes\" :value=\"url\" :key=\"type\">{{type}}</option>\n            </select>\n        </div>\n        <volunteer-filters :hide-search=\"true\" @filters-changed=\"handleFiltersChanged\" ref=\"volunteerFilters\">\n            <template v-slot:before>\n                <label for=\"\"> Filters:</label>\n            </template>\n        </volunteer-filters>\n        <div class=\"form-group form-inline\" v-show=\"reportUrl == '/applications-report'\">\n            <label for=\"start-date\">Date range:</label>\n            &nbsp;\n            <date-input v-model=\"startDate\" class=\"form-control form-control-sm\"></date-input>\n            &nbsp;to&nbsp;\n            <date-input v-model=\"endDate\" class=\"form-control form-control-sm\"></date-input>\n        </div>\n        <div class=\"form-group\">\n            <button class=\"btn btn-light border btn-sm\" @click=\"resetForm\">Reset</button>\n            <button class=\"btn btn-primary btn-sm\" @click=\"getReport\" :disabled=\"reportUrl === null\">Get report</button>\n        </div>\n    </div>\n</template>\n<script>\nimport VolunteerFilters from '../volunteers/VolunteerFilters'\nimport queryStringFromParams from '../../http/query_string_from_params'\nimport moment from 'moment'\n\nexport default {\n    components: {\n        VolunteerFilters\n    },\n    props: {\n        \n    },\n    data() {\n        return {\n            reportTypes: [],\n            reportUrl: null,\n            currentFilters: null,\n            startDate: null,\n            endDate: null\n        }\n    },\n    computed: {\n\n    },\n    methods: {\n        getReportTypes () {\n            this.reportTypes = {\n                '/assignments-report': 'Assignment Report', \n                '/applications-report':'Application Report'\n            }\n        },\n        handleFiltersChanged (filters) {\n            this.currentFilters = filters\n        },\n        resetForm () {\n            this.currentFilters = null;\n            this.reportUrl = null;\n            this.startDate = null;\n            this.endDate = null;\n            console.info('this.$refs.volunteerFilters', this.$refs.volunteerFilters);\n            this.$refs.volunteerFilters.reset();\n        },\n        getReport () {\n            let params = {...params, ...this.currentFilters};\n\n            if (this.startDate) {\n                params.start_date = moment(this.startDate).format('YYYY-MM-DD')\n            }\n            if (this.endDate) {\n                params.end_date = moment(this.endDate).format('YYYY-MM-DD')\n            }\n            const url = this.reportUrl+'?'+queryStringFromParams(params);\n            window.location = url;\n\n            // this.resetForm();\n\n        }\n    },\n    mounted() {\n        this.getReportTypes();\n    }\n}\n</script>","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ReportForm.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ReportForm.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ReportForm.vue?vue&type=template&id=2fc899ba&\"\nimport script from \"./ReportForm.vue?vue&type=script&lang=js&\"\nexport * from \"./ReportForm.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}