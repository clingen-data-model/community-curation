(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{"1Iqk":function(t,e,r){"use strict";function n(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function o(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?n(Object(r),!0).forEach((function(e){i(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function i(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function a(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r,n,o={},i=Object.keys(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}e.a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0,r=t;if(Object.keys(t).includes("filter")){var n=t.filter,i=a(t,["filter"]);r=o(o({},n),i)}var s=[];e&&s.push("page="+(r.currentPage?r.currentPage:1)),delete r.currentPage;var c=function(t){if(null===r[t]||void 0===r[t])return"continue";Array.isArray(r[t])?r[t].forEach((function(e){s.push(encodeURIComponent(t)+"[]="+encodeURIComponent(e))})):s.push(encodeURIComponent(t)+"="+encodeURIComponent(r[t]))};for(var l in r)c(l);return s.join("&")}},GTuQ:function(t,e,r){"use strict";var n=r("ibFe");r.n(n).a},"KHd+":function(t,e,r){"use strict";function n(t,e,r,n,o,i,a,s){var c,l="function"==typeof t?t.options:t;if(e&&(l.render=e,l.staticRenderFns=r,l._compiled=!0),n&&(l.functional=!0),i&&(l._scopeId="data-v-"+i),a?(c=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),o&&o.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},l._ssrRegister=c):o&&(c=s?function(){o.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:o),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(t,e){return c.call(e),u(t,e)}}else{var f=l.beforeCreate;l.beforeCreate=f?[].concat(f,c):[c]}return{exports:t,options:l}}r.d(e,"a",(function(){return n}))},THhS:function(t,e,r){(t.exports=r("I1BE")(!1)).push([t.i,".charts-container[data-v-55e99304]{min-height:150px}.pie-container[data-v-55e99304]{width:225px}.loading[data-v-55e99304]{position:absolute;top:0;right:0;bottom:0;left:0;background-color:hsla(0,0%,100%,.5)}",""])},d8pl:function(t,e,r){"use strict";r.r(e);var n=r("o0o1"),o=r.n(n),i=r("1Iqk");function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function c(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){s(i,n,o,a,c,"next",t)}function c(t){s(i,n,o,a,c,"throw",t)}a(void 0)}))}}var l=function(t){return u.apply(this,arguments)};function u(){return(u=c(o.a.mark((function t(e){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"object"===a(e)&&(e=Object(i.a)(e)),t.next=3,window.axios.get("/api/volunteers/metrics"+(e?"?"+e:"")).then((function(t){return t.data}));case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var f=r("LvDl"),p=r("f0Wu"),d=r.n(p);function v(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function h(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?v(Object(r),!0).forEach((function(e){b(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function b(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function y(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}var m={data:function(){return{metrics:{},startDate:null,endDate:null,volunteerFilters:{},loading:!1}},filters:{titleCase:function(t){return"string"!=typeof t?t:t.replace(/id/,"").toLowerCase().split("_").map((function(t){return t.charAt(0).toUpperCase()+t.slice(1)})).join(" ")}},computed:{hasMetrics:function(){return Object.keys(this.metrics).length>0},hasFilters:function(){var t=this;return!(!this.startDate&&!this.endDate)||Object.keys(this.volunteerFilters).filter((function(e){return null!==t.volunteerFilters[e]})).length>0}},methods:{getMetrics:function(){var t,e=this;return(t=o.a.mark((function t(){var r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=h(h({},{}),e.volunteerFilters),console.info("this.startDate",e.startDate),e.startDate&&(console.info("this.startDate",e.startDate),e.startDate instanceof d.a?r.start_date=e.startDate.format("YYYY-MM-DD"):r.start_date=d()(e.startDate).format("YYYY-MM-DD")),e.endDate&&(r.end_date=d()(e.endDate).format("YYYY-MM-DD")),r=Object(f.omitBy)(r,f.isUndefined),e.loading=!0,t.next=9,l(r);case 9:e.metrics=t.sent,e.loading=!1;case 11:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){y(i,n,o,a,s,"next",t)}function s(t){y(i,n,o,a,s,"throw",t)}a(void 0)}))})()},updateFilters:function(t){for(var e in t)console.info("key in filters",[e,t[e]]),this.$set(this.volunteerFilters,e,t[e]);this.getMetrics()}},mounted:function(){console.log(),this.getMetrics()}},g=(r("GTuQ"),r("KHd+")),O=Object(g.a)(m,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("volunteer-filters",{attrs:{"hide-search":!0},on:{"filters-changed":t.updateFilters}},[r("div",{attrs:{slot:"before"},slot:"before"},[r("div",{staticClass:"form-inline pr-3 border-right"},[r("date-field",{staticClass:"form-control form-control-sm",attrs:{placeholder:"Start date"},on:{input:t.updateFilters},model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}}),t._v("\n                 - \n                "),r("date-field",{staticClass:"form-control form-control-sm",attrs:{placeholder:"End date"},on:{input:t.updateFilters},model:{value:t.endDate,callback:function(e){t.endDate=e},expression:"endDate"}})],1)])]),t._v(" "),r("div",{staticClass:"position-relative chart-container mt-1"},[t.hasFilters&&!t.hasMetrics?r("div",{staticClass:"alert alert-light text-center"},[t._v("\n            No volunteers matched your filters.\n        ")]):t._e(),t._v(" "),!t.loading||t.hasMetrics?r("div",{staticClass:"d-flex flex-wrap"},t._l(t.metrics,(function(e,n){return r("div",{key:n,staticClass:"pie-container px-1"},[r("h4",{staticClass:"text-center"},[t._v(t._s(t._f("titleCase")(n)))]),t._v(" "),r("pie-chart",{attrs:{"chart-data":e}})],1)})),0):t._e(),t._v(" "),t.loading?r("div",{staticClass:"text-muted text-center loading d-flex align-items-center justify-content-center"},[r("div",{staticClass:"alert alert-light border"},[t._v("Loading...")])]):t._e()])],1)}),[],!1,null,"55e99304",null);e.default=O.exports},ibFe:function(t,e,r){var n=r("THhS");"string"==typeof n&&(n=[[t.i,n,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};r("aET+")(n,o);n.locals&&(t.exports=n.locals)}}]);
//# sourceMappingURL=global-metrics.6d68e86f5b8813e36d96.js.map