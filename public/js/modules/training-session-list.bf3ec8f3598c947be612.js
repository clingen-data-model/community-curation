(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{U6kH:function(t,s,e){"use strict";e.r(s);var n=e("o0o1"),r=e.n(n),i=e("1Iqk"),o=(e("wd/R"),e("8w6g"));function a(t,s,e,n,r,i,o){try{var a=t[i](o),c=a.value}catch(t){return void e(t)}a.done?s(c):Promise.resolve(c).then(n,r)}var c=function(){var t,s=(t=r.a.mark((function t(s){var e,n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e="/api/training-sessions?"+Object(i.a)(s),t.next=3,window.axios(e);case 3:return n=t.sent,t.abrupt("return",n.data.data.map((function(t){return new o.a(t)})));case 5:case"end":return t.stop()}}),t)})),function(){var s=this,e=arguments;return new Promise((function(n,r){var i=t.apply(s,e);function o(t){a(i,n,r,o,c,"next",t)}function c(t){a(i,n,r,o,c,"throw",t)}o(void 0)}))});return function(t){return s.apply(this,arguments)}}(),u=function(t){return window.axios.delete("api/training-sessions/"+t)},l=function(t){return t.starts_at=moment(t.starts_at).toISOString(),t.ends_at=moment(t.ends_at).toISOString(),window.axios.post("api/training-sessions",t)},d=e("WL/6");function f(t,s,e,n,r,i,o){try{var a=t[i](o),c=a.value}catch(t){return void e(t)}a.done?s(c):Promise.resolve(c).then(n,r)}function h(t){return function(){var s=this,e=arguments;return new Promise((function(n,r){var i=t.apply(s,e);function o(t){f(i,n,r,o,a,"next",t)}function a(t){f(i,n,r,o,a,"throw",t)}o(void 0)}))}}var b={components:{TrainingSessionForm:e("cfPs").a},data:function(){var t=this;return{selectedTab:this.getSelectedTab(),sessions:[],pastSessions:[],fields:[{key:"topic.name",label:"Topic",sortable:!0},{key:"starts_at",label:"Date & Time",sortable:"true",formatter:function(s,e,n){return t.$options.filters.formatDate(s,"YYYY-MM-DD HH:mm")+" EST"},sortByFormatted:!0},{key:"id",label:"",sortable:!1}],sortBy:"starts_at",sortDesc:!1,pastSortBy:"starts_at",pastSortDesc:!0,showCreate:!1,showEdit:!1,currentSession:{},errors:{}}},computed:{allSessions:function(){return this.sessions.concat(this.pastSessions)}},watch:{selectedTab:function(t,s){t!=s&&localStorage.setItem("training-list-tab",this.selectedTab)}},methods:{navigateToTrainingSession:function(t){window.location="/training-sessions/"+t.id},edit:function(t){this.currentSession=this.allSessions.find((function(s){return s.id==t})),this.showEdit=!0},destroy:function(t){var s=this;confirm("You are about to delete this training session.  This cannot be undone and the attendees will be notified of its cancellation.  Do you want to continue?")&&u(t).then((function(t){s.getSessions(),s.getPastSessions()}))},getSessions:function(){var t=this;return h(r.a.mark((function s(){return r.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,c();case 2:t.sessions=s.sent;case 3:case"end":return s.stop()}}),s)})))()},getPastSessions:function(){var t=this;return h(r.a.mark((function s(){return r.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,c({scopes:["past"]});case 2:t.pastSessions=s.sent;case 3:case"end":return s.stop()}}),s)})))()},getSelectedTab:function(){var t=localStorage.getItem("training-list-tab");return null!==t?parseInt(t):0},createSession:function(t){var s=this;this.errors={},l(t).then((function(t){var e=new o.a(t.data.data);s.sessions.push(e),s.currentSession={},s.showCreate=!1})).catch((function(t){s.errors=t.response.data.errors}))},cancelCreate:function(){this.errors={},this.showCreate=!1},updateSession:function(t){var s=this;this.errors={},Object(d.a)(this.currentSession.id,t).then((function(t){s.currentSession={},s.showEdit=!1,s.getSessions(),s.getPastSessions()})).catch((function(t){s.errors=t.response.data.errors}))},cancelUpdate:function(){this.errors={},this.currentSession={},this.showEdit=!1}},mounted:function(){var t=this;this.getSessions(),this.getPastSessions(),window.addEventListener("popstate",(function(s){t.selectedTab=s.tabIdx}))}},v=e("KHd+"),p=Object(v.a)(b,(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("div",{staticClass:"d-flex justify-content-between alert alert-info"},[t._v("\n        We've added a video showing you how to use this page: \n        "),e("screen-info",{attrs:{"video-url":"https://www.youtube.com/embed/WFFd6f-KaJA",title:"Learn about Training Sessions"}})],1),t._v(" "),e("div",{staticClass:"card"},[e("div",{staticClass:"card-header"},[e("button",{staticClass:"float-right btn btn-sm btn-primary",on:{click:function(s){t.showCreate=!0}}},[t._v("Add new")]),t._v(" "),e("h3",{staticClass:"m-0"},[t._v("\n                Training Sessions\n            ")])]),t._v(" "),e("div",{staticClass:"card-body"},[e("b-tabs",{attrs:{pills:""},model:{value:t.selectedTab,callback:function(s){t.selectedTab=s},expression:"selectedTab"}},[e("b-tab",{scopedSlots:t._u([{key:"title",fn:function(){return[t._v("\n                        Upcoming "),e("b-badge",{staticClass:"ml-1",attrs:{variant:"light"}},[t._v(t._s(t.sessions.length))])]},proxy:!0}])},[t._v(" "),e("b-table",{staticClass:"mt-4 cursor-pointer",attrs:{fields:t.fields,items:t.sessions,"sort-by":t.sortBy,"sort-desc":t.sortDesc},on:{"update:sortBy":function(s){t.sortBy=s},"update:sort-by":function(s){t.sortBy=s},"update:sortDesc":function(s){t.sortDesc=s},"update:sort-desc":function(s){t.sortDesc=s},"row-clicked":t.navigateToTrainingSession},scopedSlots:t._u([{key:"cell(id)",fn:function(s){var n=s.value;return[e("div",{staticClass:"text-right"},[e("a",{staticClass:"btn border btn-light btn-xs",attrs:{href:"/training-sessions/"+n}},[t._v("View")]),t._v(" "),e("button",{staticClass:"btn border btn-light btn-xs",on:{click:function(s){return t.edit(n)}}},[t._v("Edit")]),t._v(" "),e("button",{staticClass:"btn border btn-light btn-xs",on:{click:function(s){return t.destroy(n)}}},[t._v("Delete")])])]}},{key:"cell(starts_at)",fn:function(s){var e=s.item;return[t._v("\n                            "+t._s(e.starts_at.format("MMMM D, YYYY - h:mm a"))+"\n                        ")]}}])})],1),t._v(" "),e("b-tab",{attrs:{title:"Past"},scopedSlots:t._u([{key:"title",fn:function(){return[t._v("\n                        Past "),e("b-badge",{staticClass:"ml-1",attrs:{variant:"light"}},[t._v(t._s(t.pastSessions.length))])]},proxy:!0}])},[t._v(" "),e("b-table",{staticClass:"mt-4",attrs:{fields:t.fields,items:t.pastSessions,"sort-by":t.pastSortBy,"sort-desc":t.pastSortDesc,hover:""},on:{"update:sortBy":function(s){t.pastSortBy=s},"update:sort-by":function(s){t.pastSortBy=s},"update:sortDesc":function(s){t.pastSortDesc=s},"update:sort-desc":function(s){t.pastSortDesc=s},"row-clicked":t.navigateToTrainingSession},scopedSlots:t._u([{key:"cell(starts_at)",fn:function(s){var e=s.item;return[t._v("\n                            "+t._s(e.starts_at.format("MMMM D, YYYY - h:mm a"))+"\n                        ")]}},{key:"cell(id)",fn:function(s){var n=s.value;return[e("div",{staticClass:"text-right"},[e("a",{staticClass:"btn border btn-light btn-xs",attrs:{href:"/training-sessions/"+n}},[t._v("View")]),t._v(" "),e("button",{staticClass:"btn border btn-light btn-xs",on:{click:function(s){return t.edit(n)}}},[t._v("Edit")]),t._v(" "),e("button",{staticClass:"btn border btn-light btn-xs",on:{click:function(s){return t.destroy(n)}}},[t._v("Delete")])])]}}])})],1)],1)],1)]),t._v(" "),e("b-modal",{attrs:{size:"lg","hide-footer":""},model:{value:t.showCreate,callback:function(s){t.showCreate=s},expression:"showCreate"}},[e("training-session-form",{attrs:{errors:t.errors},on:{saved:t.createSession,canceled:t.cancelCreate}})],1),t._v(" "),e("b-modal",{attrs:{size:"lg","hide-footer":""},model:{value:t.showEdit,callback:function(s){t.showEdit=s},expression:"showEdit"}},[e("training-session-form",{attrs:{"training-session":t.currentSession,errors:t.errors},on:{saved:t.updateSession,canceled:t.cancelUpdate}})],1)],1)}),[],!1,null,null,null);s.default=p.exports}}]);
//# sourceMappingURL=training-session-list.bf3ec8f3598c947be612.js.map