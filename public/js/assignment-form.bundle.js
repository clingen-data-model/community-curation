(window.webpackJsonp=window.webpackJsonp||[]).push([[5,14],{"1Q+X":function(t,e,n){"use strict";var i=n("o0o1"),s=n.n(i);function r(t,e,n,i,s,r,a){try{var o=t[r](a),u=o.value}catch(t){return void n(t)}o.done?e(u):Promise.resolve(u).then(i,s)}var a=function(){var t,e=(t=s.a.mark((function t(){var e;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=JSON.parse(localStorage.getItem("baseline-activities"))){t.next=4;break}return t.next=4,window.axios.get("/api/curation-activities?only_baseline=1").then((function(t){return e=t.data.data,localStorage.setItem("baseline-activities",JSON.stringify(e)),e}));case 4:return t.abrupt("return",e);case 5:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(i,s){var a=t.apply(e,n);function o(t){r(a,i,s,o,u,"next",t)}function u(t){r(a,i,s,o,u,"throw",t)}o(void 0)}))});return function(){return e.apply(this,arguments)}}();e.a=a},"5zh7":function(t,e,n){"use strict";e.a=function(t,e){return window.axios.put("/api/assignments/"+t,e)}},"8fhM":function(t,e,n){"use strict";n.r(e);var i=n("o0o1"),s=n.n(i),r=n("L2JU"),a=function(t){return window.axios.post("/api/assignments",{assignable_type:t.assignable_type,assignable_id:t.assignable_id,user_id:t.user_id}).catch((function(t){return console.debug(t),alert("There was a problem saving the assignment.  If the problem persists please contact the administrator"),t}))},o=n("pQJT"),u=function(t){return window.axios.post("/api/trainings",t).catch((function(t){return console.debug(t),alert("There was a problem saving the training.  If the problem persists please contact the administrator"),t}))},c=n("gwWm");function l(t,e,n,i,s,r,a){try{var o=t[r](a),u=o.value}catch(t){return void n(t)}o.done?e(u):Promise.resolve(u).then(i,s)}var d=function(){var t,e=(t=s.a.mark((function t(){var e;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=JSON.parse(localStorage.getItem("aptitudes"))){t.next=4;break}return t.next=4,window.axios.get("/api/aptitudes").then((function(t){e=t.data.data,localStorage.setItem("aptitudes",JSON.stringify(e))}));case 4:return t.abrupt("return",e);case 5:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(i,s){var r=t.apply(e,n);function a(t){l(r,i,s,a,o,"next",t)}function o(t){l(r,i,s,a,o,"throw",t)}a(void 0)}))});return function(){return e.apply(this,arguments)}}(),v=function(t){return window.axios.delete("/api/assignments/"+t.id)},p=n("DpU4"),m=n("eLlm"),f=n("5zh7"),g={components:{AssignmentStatusInput:m.a},props:{variant:{type:String,default:"primary"},assignment:{type:Object,required:!0}},data:function(){return{savingUpdate:!1}},computed:{},methods:{handleAssignmentChange:function(t){var e=this;this.savingUpdate=!0,Object(f.a)(this.assignment.id,{assignment_status_id:t}).then((function(t){return e.$emit("assignmentsupdated"),t})).catch((function(t){return console.error(t)})).then((function(){e.savingUpdate=!1,e.$refs.statusPopover.$emit("close")}))}}},_=n("KHd+"),h=Object(_.a)(g,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"d-inline-block",staticStyle:{width:"100px"}},[n("div",{staticClass:"badge badge-light border",attrs:{id:"assignment-status-badge-"+t.assignment.id}},[t._v("\n        "+t._s(t.assignment.status.name)+"\n        "),n("span",{staticClass:"text-muted"},[t._v("|")]),t._v(" "),n("i",{staticClass:"material-icons text-muted",staticStyle:{"font-size":"1em"}},[t._v("edit")])]),t._v(" "),n("b-popover",{ref:"statusPopover",attrs:{target:"assignment-status-badge-"+t.assignment.id,triggers:"hover focus"}},[n("small",[t._v("Set Status:")]),t._v(" "),t.savingUpdate?t._e():n("assignment-status-input",{attrs:{assignment:t.assignment},on:{assignmentstatuschange:t.handleAssignmentChange}}),t._v(" "),n("div",[t.savingUpdate?n("small",{staticClass:"text-muted"},[t._v("Saving status update...")]):t._e()])],1)],1)}),[],!1,null,null,null).exports,b={components:{DateField:p.default,StatusBadge:h},props:{volunteer:{required:!0,type:Object},assignment:{required:!0},curationGroups:{required:!0,type:Array}},data:function(){return{newCurationGroup:null,addingCurationGroup:!1}},computed:{showAddButton:function(){return!this.addingCurationGroup&&!this.assignment.needsAptitude&&this.hasMoreCurationGroups},hasMoreCurationGroups:function(){return this.curationGroups.length>0}},methods:{confirmSave:function(){return!(!this.newCurationGroup||1!=this.newCurationGroup.accepting_volunteers)||(!!confirm("The curation group you are about to assign is not currently accepting volunteers.  Are you sure you want to assign this assign this group?")||void 0)},emitSave:function(){this.confirmSave()&&(this.$emit("save",this.newCurationGroup),this.addingCurationGroup=!1,this.newCurationGroup=null)},cancelAddingCurationGroup:function(){this.newCurationGroup=null,this.addingCurationGroup=!1,this.$emit("cancel")},removeAssignment:function(t){confirm("You are about to unassign "+this.volunteer.name+" from "+t.assignable.name+". \n\nThis cannot be undone.")&&this.$emit("unassign",t)}}},y=Object(_.a)(b,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"component-container"},[n("table",{staticClass:"table table-borderless table-sm mb-1"},t._l(t.assignment.sub_assignments,(function(e,i){return n("tr",{key:i},[n("td",{staticStyle:{width:"60%"}},[n("div",[t._v(t._s(e.assignable.name))])]),t._v(" "),n("td",[n("status-badge",{attrs:{assignment:e},on:{assignmentsupdated:function(e){return t.$emit("assignmentsupdated")}}})],1),t._v(" "),n("td",{staticClass:"text-right"},[n("delete-button",{on:{click:function(n){return t.removeAssignment(e)}}})],1)])})),0),t._v(" "),t.showAddButton?n("button",{staticClass:"btn btn-sm btn-xs border",attrs:{disabled:t.volunteer.volunteer_status_id==t.$store.state.configs.volunteers.statuses.retired},on:{click:function(e){t.addingCurationGroup=!0}}},[t._v("\n        Add curation group\n    ")]):t._e(),t._v(" "),t.hasMoreCurationGroups?t._e():n("small",{staticClass:"text-muted btn border btn-xs"},[t._v("All panels assigned")]),t._v(" "),t.addingCurationGroup?n("div",{staticClass:"form-inline"},[n("select",{directives:[{name:"model",rawName:"v-model",value:t.newCurationGroup,expression:"newCurationGroup"}],staticClass:"form-control form-control-sm",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.newCurationGroup=e.target.multiple?n:n[0]}}},[n("option",{domProps:{value:null}},[t._v("Select…")]),t._v(" "),t._l(t.curationGroups,(function(e,i){return n("option",{key:i,domProps:{value:e}},[t._v("\n                "+t._s(e.name)+" "+t._s(0==e.accepting_volunteers?"*":"")+"\n            ")])}))],2),t._v("\n         \n        "),n("button",{staticClass:"btn btn-sm btn-primary",on:{click:t.emitSave}},[t._v("Save")]),t._v(" "),n("button",{staticClass:"btn btn-sm btn-default",on:{click:t.cancelAddingCurationGroup}},[t._v("Cancel")]),t._v(" "),n("div",{staticClass:"text-muted"},[t._v("* = not accepting volunteers.")])]):t._e()])}),[],!1,null,null,null).exports;function w(t,e,n,i,s,r,a){try{var o=t[r](a),u=o.value}catch(t){return void n(t)}o.done?e(u):Promise.resolve(u).then(i,s)}var C=function(){var t,e=(t=s.a.mark((function t(e){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,axios.get("/api/genes"+(e?"?"+e:"")).then((function(t){return t.data.data}));case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(i,s){var r=t.apply(e,n);function a(t){w(r,i,s,a,o,"next",t)}function o(t){w(r,i,s,a,o,"throw",t)}a(void 0)}))});return function(t){return e.apply(this,arguments)}}();function A(t,e,n,i,s,r,a){try{var o=t[r](a),u=o.value}catch(t){return void n(t)}o.done?e(u):Promise.resolve(u).then(i,s)}var x={components:{StatusBadge:h},props:{assignment:{required:!0},volunteer:{required:!0}},data:function(){return{loadingGenes:!1,newGene:null,addingGene:!1,genes:[]}},computed:{filteredGenes:function(){var t=this;return this.genes.filter((function(e){return!t.assignment.sub_assignments.map((function(t){return t.assignable.id})).includes(e.id)}))}},methods:{emitSave:function(){this.$emit("save",this.newGene),this.addingGene=!1,this.newGene=null},cancelAddingGene:function(){this.newGene=null,this.addingGene=!1,this.$emit("cancel")},getGenes:function(){var t,e=this;return(t=s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C();case 2:e.genes=t.sent,e.loadingGenes=!0,e.loadingGenes=!1;case 5:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(i,s){var r=t.apply(e,n);function a(t){A(r,i,s,a,o,"next",t)}function o(t){A(r,i,s,a,o,"throw",t)}a(void 0)}))})()},removeAssignment:function(t){confirm("You are about to unassign "+this.volunteer.name+" from "+t.assignable.name+". \n\nThis cannot be undone.")&&this.$emit("unassign",t)}},mounted:function(){this.getGenes()}},G=Object(_.a)(x,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("table",{staticClass:"table table-sm table-borderless mb-1"},[t._m(0),t._v(" "),t._l(t.assignment.sub_assignments,(function(e,i){return n("tr",{key:i},[n("td",[t._v("\n                "+t._s(e.assignable.symbol)+"\n                "),n("small",{staticClass:"text-muted"},[t._v("("+t._s(e.assignable.hgnc_id)+")")])]),t._v(" "),n("td",[n("status-badge",{attrs:{assignment:e},on:{assignmentsupdated:function(e){return t.$emit("assignmentsupdated")}}})],1),t._v(" "),n("td",[n("small",[e.assignable.protocol_path?n("a",{attrs:{href:"/storage/"+e.assignable.protocol_path}},[t._v("\n                        Protocol\n                    ")]):t._e(),t._v(" "),n("br"),t._v(" "),e.assignable.hypothesis_group_url?n("a",{attrs:{href:"/storage/"+e.assignable.hypothesis_group_url}},[t._v("\n                        Hypothes.is\n                    ")]):t._e()])]),t._v(" "),n("td",{staticClass:"text-right"},[n("delete-button",{on:{click:function(n){return t.removeAssignment(e)}}})],1)])})),t._v(" "),n("tr",[n("td",{attrs:{colspan:"3"}},[t.addingGene||t.assignment.needsAptitude?t._e():n("button",{staticClass:"btn btn-sm btn-xs border",attrs:{disabled:t.volunteer.volunteer_status_id==t.$store.state.configs.volunteers.statuses.retired},on:{click:function(e){t.addingGene=!0}}},[t._v("\n                    Add Gene\n                ")]),t._v(" "),t.addingGene?n("div",{staticClass:"form-inline"},[n("select",{directives:[{name:"model",rawName:"v-model",value:t.newGene,expression:"newGene"}],staticClass:"form-control form-control-sm",attrs:{disabled:t.loadingGenes},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.newGene=e.target.multiple?n:n[0]}}},[n("option",{domProps:{value:null}},[t._v("Select…")]),t._v(" "),t._l(t.filteredGenes,(function(e,i){return n("option",{key:i,domProps:{value:e}},[t._v("\n                            "+t._s(e.symbol)+" - "+t._s(e.hgnc_id)+"\n                        ")])}))],2),t._v("\n                     \n                    "),n("button",{staticClass:"btn btn-sm btn-primary",on:{click:t.emitSave}},[t._v("Save")]),t._v(" "),n("button",{staticClass:"btn btn-sm btn-default",on:{click:t.cancelAddingGene}},[t._v("Cancel")])]):t._e()])])],2)])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("tr",[e("th",{staticClass:"border-bottom",staticStyle:{width:"50%"}},[e("small",[this._v("Gene Symbol")])]),this._v(" "),e("th",{staticClass:"border-bottom"},[e("small",[this._v("Status")])]),this._v(" "),e("th",{staticClass:"border-bottom",attrs:{colspan:"2"}},[e("small",[this._v("Links")])])])}],!1,null,null,null).exports,S=n("tJPs"),k={props:{userAptitude:{required:!0}},data:function(){return{newTrainingCompletedDate:null,setTrainingDate:!1}},methods:{emitTrainingCompleted:function(t){this.$emit("trainingcompleted",{id:t.id,trained_at:this.newTrainingCompletedDate})}}},$=Object(_.a)(k,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[null==t.userAptitude.trained_at?n("div",[n("div",{staticClass:"form-inline"},[t.$store.state.user.notVolunteer()?n("div",[n("div",{directives:[{name:"show",rawName:"v-show",value:t.setTrainingDate,expression:"setTrainingDate"}],staticClass:"form-inline"},[n("label",[t._v("Date completed:")]),t._v("\n                     \n                    "),n("date-field",{staticClass:"form-control form-control-sm",model:{value:t.newTrainingCompletedDate,callback:function(e){t.newTrainingCompletedDate=e},expression:"newTrainingCompletedDate"}}),t._v(" "),n("button",{staticClass:"btn btn-sm btn-primary",on:{click:function(e){return t.emitTrainingCompleted(t.userAptitude)}}},[t._v("Save")])],1),t._v(" "),n("button",{directives:[{name:"show",rawName:"v-show",value:!t.setTrainingDate,expression:"!setTrainingDate"}],staticClass:"btn btn-sm btn-primary",on:{click:function(e){t.setTrainingDate=!0}}},[t._v("Mark "+t._s(t.userAptitude.aptitude.name)+" Training complete")])]):t._e()])]):n("div",[t.userAptitude.attestation.signed_at?t._e():n("div",[n("a",{staticClass:"btn btn-sm btn-primary",attrs:{href:"/attestations/"+t.userAptitude.attestation.id+"/edit"}},[t._v("Sign attestation")])])])])}),[],!1,null,null,null).exports,O=n("IAky");function P(t,e,n,i,s,r,a){try{var o=t[r](a),u=o.value}catch(t){return void n(t)}o.done?e(u):Promise.resolve(u).then(i,s)}var j,T,E={props:{volunteer:{type:Object,required:!0}},data:function(){return{newCurationActivity:null,addingCurationActivity:!1}},computed:{activityCurationAssignments:function(){return this.volunteer.assignments},unassignedCurationActivities:function(){var t=this.activityCurationAssignments.map((function(t){return t.assignable_id}));return this.curationActivities.filter((function(e){return-1==t.indexOf(e.id)}))}},methods:{fetchCurationActivities:(j=s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(O.a)();case 2:this.curationActivities=t.sent;case 3:case"end":return t.stop()}}),t,this)})),T=function(){var t=this,e=arguments;return new Promise((function(n,i){var s=j.apply(t,e);function r(t){P(s,n,i,r,a,"next",t)}function a(t){P(s,n,i,r,a,"throw",t)}r(void 0)}))},function(){return T.apply(this,arguments)}),saveNewCurationActivity:function(){this.$emit("activity_selected",this.newCurationActivity)},cancelAddingActivity:function(){this.newCurationActivity=null,this.addingCurationActivity=!1}},created:function(){this.fetchCurationActivities()}},D=Object(_.a)(E,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"d-inline-block"},[t.addingCurationActivity?t._e():n("button",{staticClass:"btn btn-default border btn-sm",attrs:{disabled:t.volunteer.volunteer_status_id==t.$store.state.configs.volunteers.statuses.retired},on:{click:function(e){t.addingCurationActivity=!0}}},[t._v("\n        Add Curation Activity\n    ")]),t._v(" "),t.addingCurationActivity?n("div",{staticClass:"form-inline"},[n("select",{directives:[{name:"model",rawName:"v-model",value:t.newCurationActivity,expression:"newCurationActivity"}],staticClass:"form-control form-control-sm",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.newCurationActivity=e.target.multiple?n:n[0]}}},[n("option",{domProps:{value:null}},[t._v("Select…")]),t._v(" "),t._l(t.unassignedCurationActivities,(function(e,i){return n("option",{key:i,domProps:{value:e}},[t._v("\n                "+t._s(e.name)+"\n            ")])}))],2),t._v("\n         \n        "),n("button",{staticClass:"btn btn-sm btn-primary",on:{click:t.saveNewCurationActivity}},[t._v("Save")]),t._v(" "),n("button",{staticClass:"btn btn-sm btn-default",on:{click:t.cancelAddingActivity}},[t._v("Cancel")])]):t._e()])}),[],!1,null,null,null).exports,N=n("1Q+X");function I(t,e,n,i,s,r,a){try{var o=t[r](a),u=o.value}catch(t){return void n(t)}o.done?e(u):Promise.resolve(u).then(i,s)}var B,Y={props:{volunteer:{type:Object,required:!0}},data:function(){return{baselineActivities:null}},computed:{},methods:{assignBaselineActivity:function(){this.$emit("assigned",this.baselineActivities[0])},assignGeneticEvidenceTraining:function(){this.$emit("giveGeneticEvidence")},fetchBaselineActivities:(B=function(t){return function(){var e=this,n=arguments;return new Promise((function(i,s){var r=t.apply(e,n);function a(t){I(r,i,s,a,o,"next",t)}function o(t){I(r,i,s,a,o,"throw",t)}a(void 0)}))}}(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(N.a)();case 2:this.baselineActivities=t.sent;case 3:case"end":return t.stop()}}),t,this)}))),function(){return B.apply(this,arguments)})},created:function(){this.fetchBaselineActivities()}},q=Object(_.a)(Y,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",[this.volunteer.assignedToBaseline()?this._e():e("button",{staticClass:"btn btn-sm border",on:{click:this.assignBaselineActivity}},[this._v("\n        Assign Baseline Evidence\n    ")])])}),[],!1,null,null,null).exports,J={components:{TrainingAndAttestationControl:$},props:{assignment:{type:Object,required:!0}}},M=Object(_.a)(J,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.assignment.assignable.aptitudes.length>1?n("div",{staticClass:"ml-1"},[t.assignment.user_aptitudes.pending().secondary().length>0?n("div",[n("training-and-attestation-control",{attrs:{userAptitude:t.assignment.user_aptitudes.pending().secondary().get(0)},on:{trainingcompleted:function(e){return t.$emit("trainingcompleted",e)}}})],1):n("div",[t.assignment.user_aptitudes.granted().secondary().length>0?n("div",[n("ul",{staticClass:"list-unstyled"},t._l(t.assignment.user_aptitudes.granted().secondary(),(function(e){return n("li",{key:e.id},[n("small",[t._v(t._s(e.aptitude.name))])])})),0),t._v("\n                "+t._s(t.assignment.user_aptitudes.g)+"\n            ")]):n("ul",{staticClass:"list-unstyled mt-1"},t._l(t.assignment.getUnassignedAptitudes().secondary(),(function(e){return n("li",{key:e.id},[n("non-volunteer",[n("button",{staticClass:"btn btn-sm btn-link",on:{click:function(n){return t.$emit("assignAptitude",e)}}},[t._v("\n                            Assign "+t._s(e.name)+"\n                        ")])])],1)})),0)])]):t._e()])}),[],!1,null,null,null).exports;function U(t,e,n,i,s,r,a){try{var o=t[r](a),u=o.value}catch(t){return void n(t)}o.done?e(u):Promise.resolve(u).then(i,s)}function V(t){return function(){var e=this,n=arguments;return new Promise((function(i,s){var r=t.apply(e,n);function a(t){U(r,i,s,a,o,"next",t)}function o(t){U(r,i,s,a,o,"throw",t)}a(void 0)}))}}function H(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function L(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?H(Object(n),!0).forEach((function(e){R(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function R(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Q,K,F={props:{volunteer:{required:!0},updating:{required:!1,default:!1},showVolunteer:{required:!1,default:!1,type:Boolean}},components:{CurationGroupCell:y,PrioritiesList:S.a,TrainingAndAttestationControl:$,GeneGroupSelector:G,StatusBadge:h,AssignActivityButton:D,AssignBaselineButton:q,SecondaryAptitudeControl:M},data:function(){return{priorities:[{activity:"Gene",curationGroup:"test EP"},{activity:"Dosage",curationGroup:"test EP"}],newCurationActivity:null,newCurationGroupId:null,curationActivities:[],curationGroups:[],aptitudes:[],configs:window.configs}},computed:{unassignedCurationGroups:function(){var t=Object.values(this.volunteer.assignments.map((function(t){return t.sub_assignments}))).flat().map((function(t){return t.assignable}));return this.curationGroups.filter((function(e){return-1==t.map((function(t){return t.id})).indexOf(e.id)}))},geneticEvidenceAptitude:function(){return this.aptitudes.find((function(t){return"Baseline, Genetic Evidence"===t.name}))},baselineAssignment:function(){return this.volunteer.assignments.find((function(t){return"Baseline"==t.assignable.name})).curationActivity}},methods:L(L({},Object(r.d)("messages",["addInfo"])),{},{fetchCurationGroups:(K=V(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(c.a)();case 2:this.curationGroups=t.sent;case 3:case"end":return t.stop()}}),t,this)}))),function(){return K.apply(this,arguments)}),fetchAptitudes:(Q=V(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d();case 2:this.aptitudes=t.sent;case 3:case"end":return t.stop()}}),t,this)}))),function(){return Q.apply(this,arguments)}),getCurationGroupsForCurationActivity:function(t){return this.unassignedCurationGroups.filter((function(e){return e.curation_activity_id==t}))},saveNewAssignment:function(t,e){var n=this;a({assignable_type:t,assignable_id:e.id,user_id:this.volunteer.id}).then((function(t){n.$emit("saved")}))},markTrainingCompleted:function(t){var e=this,n=t.id,i=t.trained_at;Object(o.a)(n,i).then((function(){return e.$emit("saved")}))},createAptitudeTraining:function(t,e){var n=this,i={aptitude_id:t.id,user_id:this.volunteer.id,assignment_id:e.id};u(i).then((function(t){return n.$emit("saved")}))},confirmUnassign:function(t){confirm("You are about the unassign "+this.volunteer.name+" from "+t.assignable.name+" and all related panels/genes.\n\nThis cannot be undone.")&&this.removeAssignment(t)},removeAssignment:function(t){var e=this;v(t).then((function(n){e.addInfo(e.volunteer.name+" has been unassigned from "+t.assignable.name),e.$emit("saved")})).catch((function(t){console.error(t),t.response&&alert(t.response.statusMessage)}))}}),mounted:function(){this.fetchCurationGroups(),this.fetchAptitudes()}},X=Object(_.a)(F,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h4",[t._v("\n        Assign Activity and Curation Group\n        "),t.showVolunteer?n("span",[t._v(" - "+t._s(t.volunteer.name))]):t._e()]),t._v(" "),n("hr"),t._v(" "),n("div",[n("h5",[t._v("Volunteer Priorities")]),t._v(" "),n("priorities-list",{attrs:{volunteer:t.volunteer,"disable-set-new":!0,"disable-view-complete":!0}})],1),t._v(" "),n("div",{staticClass:"mt-4"},[n("h5",[t._v("\n            Assignments\n        ")]),t._v(" "),n("div",{staticClass:"position-relative"},[n("table",{staticClass:"table table-sm table-bordered mb-1"},[n("thead",[n("tr",[n("th",{staticStyle:{width:"30%"}},[t._v("Curation Activities:")]),t._v(" "),n("th",[t.volunteer.isComprehensive()?n("span",[t._v("Panels / ")]):t._e(),t._v("Genes:\n                        ")])])]),t._v(" "),n("tbody",t._l(t.volunteer.assignments,(function(e){return n("tr",{key:e.id},[n("td",{class:{"text-strike text-muted":e.assignment_status_id==t.$store.state.configs.project.assignmentStatuses.retired}},[n("div",[n("delete-button",{staticClass:"float-right",on:{click:function(n){return t.confirmUnassign(e)}}}),t._v(" "),n("strong",[t._v(t._s(e.assignable.name))]),t._v(" "),n("status-badge",{attrs:{assignment:e},on:{assignmentsupdated:function(e){return t.$emit("assignmentsupdated")}}})],1),t._v(" "),n("secondary-aptitude-control",{staticClass:"mt-1",attrs:{assignment:e},on:{assignAptitude:function(n){return t.createAptitudeTraining(n,e)},trainingcompleted:t.markTrainingCompleted}})],1),t._v(" "),n("td",{attrs:{colspan:"2"}},[e.user_aptitudes.pending().primary().length>0?n("div",[n("training-and-attestation-control",{attrs:{userAptitude:e.user_aptitudes.pending().primary().get(0)},on:{trainingcompleted:t.markTrainingCompleted}})],1):n("div",[1==e.assignable.curation_activity_type_id?n("curation-group-cell",{attrs:{assignment:e,"curation-groups":t.getCurationGroupsForCurationActivity(e.assignable.id),volunteer:t.volunteer},on:{save:function(e){return t.saveNewAssignment("App\\CurationGroup",e)},assignmentsupdated:function(e){return t.$emit("assignmentsupdated")},unassign:function(e){return t.removeAssignment(e)}}}):t._e(),t._v(" "),2==e.assignable.curation_activity_type_id?n("gene-group-selector",{attrs:{assignment:e,volunteer:t.volunteer},on:{save:function(e){return t.saveNewAssignment("App\\Gene",e)},assignmentsupdated:function(e){return t.$emit("assignmentsupdated")},unassign:function(e){return t.removeAssignment(e)}}}):t._e()],1)])])})),0)]),t._v(" "),n("div",{staticClass:"d-flex justify-content-between"},[t.volunteer.isComprehensive()?n("assign-activity-button",{attrs:{volunteer:t.volunteer},on:{activity_selected:function(e){return t.saveNewAssignment("App\\CurationActivity",e)}}}):t._e(),t._v(" "),n("assign-baseline-button",{attrs:{volunteer:t.volunteer},on:{assigned:function(e){return t.saveNewAssignment("App\\CurationActivity",e)}}})],1)])])])}),[],!1,null,null,null);e.default=X.exports},DpU4:function(t,e,n){"use strict";n.r(e);var i=n("wd/R"),s=n.n(i),r=(n("76gO"),{name:"date-field",props:["name","value","placeholder"],data:function(){return{}},computed:{formatted:function(){return this.value?s()(this.value).format("MM/DD/YYYY"):null}},mounted:function(){this.$nextTick(function(){jQuery(this.$el).datepicker().on("changeDate",function(t){jQuery(this.$el).trigger("input"),this.$emit("input",s()(t.date,"MM/DD/YYYY").toDate())}.bind(this))}.bind(this))}}),a=n("KHd+"),o=Object(a.a)(r,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("input",{ref:"input",staticClass:"vue-date-field",attrs:{type:"text",placeholder:t.placeholder},domProps:{value:t.formatted},on:{input:function(e){e.target.value=t.value}}})}),[],!1,null,null,null);e.default=o.exports},"KHd+":function(t,e,n){"use strict";function i(t,e,n,i,s,r,a,o){var u,c="function"==typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=n,c._compiled=!0),i&&(c.functional=!0),r&&(c._scopeId="data-v-"+r),a?(u=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),s&&s.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},c._ssrRegister=u):s&&(u=o?function(){s.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:s),u)if(c.functional){c._injectStyles=u;var l=c.render;c.render=function(t,e){return u.call(e),l(t,e)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,u):[u]}return{exports:t,options:c}}n.d(e,"a",(function(){return i}))},eLlm:function(t,e,n){"use strict";var i=n("o0o1"),s=n.n(i);function r(t,e,n,i,s,r,a){try{var o=t[r](a),u=o.value}catch(t){return void n(t)}o.done?e(u):Promise.resolve(u).then(i,s)}var a=function(){var t,e=(t=s.a.mark((function t(){var e;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=JSON.parse(localStorage.getItem("assignment-statuses"))){t.next=5;break}return t.next=4,window.axios.get("/api/assignment-statuses").then((function(t){return localStorage.setItem("assignment-statuses",JSON.stringify(t.data.data)),t.data.data}));case 4:e=t.sent;case 5:return t.abrupt("return",e);case 6:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(i,s){var a=t.apply(e,n);function o(t){r(a,i,s,o,u,"next",t)}function u(t){r(a,i,s,o,u,"throw",t)}o(void 0)}))});return function(){return e.apply(this,arguments)}}();function o(t,e,n,i,s,r,a){try{var o=t[r](a),u=o.value}catch(t){return void n(t)}o.done?e(u):Promise.resolve(u).then(i,s)}var u,c,l={components:{},props:{assignment:{required:!0,type:Object}},data:function(){return{newAssignmentStatusId:null,assignmentStatuses:[]}},watch:{assignment:function(t,e){this.newAssignmentStatusId=this.assignment.assignment_status_id}},methods:{fetchAssignmentStatuses:(u=s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a();case 2:this.assignmentStatuses=t.sent;case 3:case"end":return t.stop()}}),t,this)})),c=function(){var t=this,e=arguments;return new Promise((function(n,i){var s=u.apply(t,e);function r(t){o(s,n,i,r,a,"next",t)}function a(t){o(s,n,i,r,a,"throw",t)}r(void 0)}))},function(){return c.apply(this,arguments)})},mounted:function(){this.newAssignmentStatusId=this.assignment.assignment_status_id,this.fetchAssignmentStatuses()}},d=n("KHd+"),v=Object(d.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("select",{directives:[{name:"model",rawName:"v-model",value:t.newAssignmentStatusId,expression:"newAssignmentStatusId"}],staticClass:"form-control form-control-sm",on:{change:[function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.newAssignmentStatusId=e.target.multiple?n:n[0]},function(e){return t.$emit("assignmentstatuschange",t.newAssignmentStatusId)}]}},[n("option",{domProps:{value:null}},[t._v("Select")]),t._v(" "),t._l(t.assignmentStatuses,(function(e){return n("option",{key:e.id,domProps:{value:e.id}},[t._v("\n        "+t._s(e.name)+"\n    ")])}))],2)}),[],!1,null,null,null);e.a=v.exports},pQJT:function(t,e,n){"use strict";var i=n("wd/R"),s=n.n(i);e.a=function(t,e){var n={trained_at:s()(e).format("YYYY-MM-DD")};return window.axios.put("/api/trainings/"+t,n)}},tJPs:function(t,e,n){"use strict";var i={props:{volunteer:{required:!0,type:Object},disableSetNew:{type:Boolean,default:!1},disableViewComplete:{type:Boolean,default:!1}},data:function(){return{outsidePanelOptions:{1:"Yes",0:"No",2:"Maybe"}}},computed:{outsidePanel:function(){return this.hasPriorities?this.outsidePanelOptions[this.volunteer.latest_priorities[0].outside_panel]:"no priorities"},prioritiesSurveyLink:function(){return"/app-user/"+this.volunteer.id+"/survey/priorities1/new"},hasPriorities:function(){return this.volunteer.priorities.length>0},responseLink:function(){return this.hasPriorities&&null!==this.volunteer.latest_priorities[0].survey_id?"/surveys-by-id/"+this.volunteer.latest_priorities[0].survey_id+"/responses/"+this.volunteer.latest_priorities[0].response_id:null}}},s=n("KHd+"),r=Object(s.a)(i,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"component-container"},[t.hasPriorities?n("div",[t.hasPriorities?n("table",{staticClass:"table table-striped table-sm"},[t._m(2),t._v(" "),n("tbody",t._l(t.volunteer.latest_priorities,(function(e,i){return n("tr",{key:i},[n("td",[t._v(t._s(e.priority_order))]),t._v(" "),n("td",[t._v(t._s(e.curation_activity.name))]),t._v(" "),n("td",[t._v(t._s(e.curation_group?e.curation_group.name:"--"))]),t._v(" "),n("td",[t._v("\n                        "+t._s(t._f("boolToHuman")(e.effort_experience))+"\n                        "),1==e.effort_experience?n("span",[t._v("\n                            - "+t._s(e.effort_experience_details)+"\n                        ")]):t._e()]),t._v(" "),n("td",[t._v("\n                        "+t._s(t._f("boolToHuman")(e.activity_experience))+"\n                        "),1==e.activity_experience?n("span",[t._v("\n                            - "+t._s(e.activity_experience_details)+"\n                        ")]):t._e()])])})),0)]):n("div",{staticClass:"alert alert-danger my-4 col-10 mx-auto"},[t._m(0),t._v("\n            Based on the expected workflow this is not possible, but there are a few ways it could have happened:\n            "),t._m(1)]),t._v(" "),n("div",{staticClass:"my-2 pb-2 border-bottom"},[t._v("\n            Willing to volunteer outside of preferences: "),n("strong",[t._v(t._s(t.volunteer.latest_priorities[0].outside_panel))])]),t._v(" "),t.disableSetNew||t.disableViewComplete?t._e():n("div",{staticClass:"d-flex justify-content-between pt-2 align-items-center"},[n("a",{staticClass:"btn btn-primary",attrs:{href:t.prioritiesSurveyLink}},[t._v("\n                Set New Priorities\n            ")])])]):n("div",{staticClass:"alert alert-info"},[t.volunteer.isBaseline()?n("div",[t._v("\n            "+t._s(t.$store.state.user.isVolunteer()?"You are":"This volunteer is")+"\n            currently a baseline volunteer.  If "+t._s(t.$store.state.user.isVolunteer()?"You wish":"the volunteer wishes")+"\n            to become a comprehensive volunteer please "),n("a",{attrs:{href:"/app-user/"+this.volunteer.id+"/survey/priorities1/new"}},[t._v("set priorities")]),t._v("\n            to start that process.\n        ")]):n("div",[t._v("\n            You haven't set any priorities.\n        ")]),t._v(" "),n("div",{staticClass:"mt-2"},[n("a",{staticClass:"btn btn-primary",attrs:{href:"/app-user/"+this.volunteer.id+"/survey/priorities1/new"}},[t._v("Set Priorities")])])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("h4",[e("strong",[this._v("This volunteer did not complete an application.")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",[n("li",[t._v("This is a "),n("strong",[t._v("test database")]),t._v(" and you are looking at a volunteer that was created for testing purposes w/o completing an applications survey.")]),t._v(" "),n("li",[t._v("An admin "),n("strong",[t._v("created")]),t._v(" a volunteer user "),n("strong",[t._v("using the admin panel")]),t._v(".")]),t._v(" "),n("li",[t._v("Something mysterious is going on and you should contact an administrator.")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",[n("tr",[n("th",[t._v("Rank")]),t._v(" "),n("th",[t._v("Curation Activity")]),t._v(" "),n("th",[t._v("Curation Group")]),t._v(" "),n("th",[t._v("Effort Experience")]),t._v(" "),n("th",[t._v("Activity Experience")])])])}],!1,null,null,null);e.a=r.exports}}]);
//# sourceMappingURL=assignment-form.bundle.js.map